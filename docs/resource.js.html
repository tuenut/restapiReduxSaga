<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: resource.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: resource.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import {UrlConstructor} from "./urlConstructor.js";


/**
 * @classdesc Base class for REST API resource. Common REST API methods already
 * implemented there. It can be enough to use.
 *
 * @todo : Check for necessery of usage `.then` for Axios promises in that class.
 *  Sagas generated by factories shoud works and handle with returning result of
 *  that class methods.
 *
 * @property {URLConstructor} #url - URL constructor object.
 *
 * */
export class ApiResource {
  #url;
  #request;

  /** That class and its inheritors must be instantiated by
   *  `ApiRepository#createResource()` method.
   *
   * @param {requestMethod} requestMethod -
   * @param {string} [url=""] -
   * */
  constructor(requestMethod, url = "") {
    if (!requestMethod) {
      throw new Error("Request method must be provide to resource class.");
    } else {
      this.#request = requestMethod;
    }

    this.#url = new UrlConstructor(url);
  }

  get request() {
    return this.#request;
  }

  get url() {
    return this.#url;
  }

  /**
   * @param {number | string} id - Id of entity.
   * @param {string} [extraAction=""] - Name of extra action for endpoint.
   * @param {object} [options]
   *
   * @returns {AxiosPromise} AxiosPromise without catch statement.
   * */
  retrieve(id, extraAction, options) {
    return this.request("retrieve", this.url.retrieve(id, extraAction, options));
  }

  /**
   * @param {object} [options] - REST API otions.
   * @param {string} [extraAction] -
   *
   * @returns {AxiosPromise} AxiosPromise without catch statement.
   * */
  list(options, extraAction) {
    return this.request("list", this.url.list(options, extraAction));
  }

  /**
   * @param {object} data - Data for create new object.
   *
   * @returns {AxiosPromise} - AxiosPromise without catch statement.
   * */
  create(data) {
    return this.request("create", this.url.create(), data);
  }

  /**
   * @param {number | string} id - Id of entity.
   * @param {object} data - Data for update object.
   *
   * @returns {AxiosPromise} AxiosPromise without catch statement.
   * */
  update(id, data) {
    return this.request("update", this.url.update(id), data);
  }

  /**
   * @param {number | string} id - Id of entity.
   *
   * @returns {AxiosPromise} AxiosPromise without catch statement.
   * */
  delete(id) {
    return this.request("delete", this.url.delete(id));
  }

  /** You can use that for prototyping some code without use real requests to server.
   *
   * @param {object} [fakeData] - that data will be returned from endpoint
   * @param {number} [delay] - optional delay to simulate real dealy between
   *  request and response.
   *
   * @returns {Promise}
   * */
  fakeRequest(
    fakeData = {message: "This is fake data."},
    delay = 500
  ) {
    const fakedResponsePromise = new Promise((resultHandler, reject) => {
      setTimeout(
        (value) => resultHandler({data: {...fakeData}}),
        delay
      );
    });

    return fakedResponsePromise;
  }
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ApiManagerSingleton.html">ApiManagerSingleton</a></li><li><a href="ApiRepository.html">ApiRepository</a></li><li><a href="ApiResource.html">ApiResource</a></li><li><a href="UrlConstructor.html">UrlConstructor</a></li></ul><h3>Global</h3><ul><li><a href="global.html#configureApi">configureApi</a></li><li><a href="global.html#getApi">getApi</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Wed Jul 14 2021 14:02:56 GMT+0300 (Moscow Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
